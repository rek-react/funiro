class Spoilers{constructor(e){this.spoilers=e;const t=Array.from(this.spoilers).filter((e=>!e.dataset.spoilers.split(",")[0]));t&&this.initSpollers(t);const i=Array.from(this.spoilers).filter((e=>e.dataset.spoilers.split(",")[0]));i&&this.mediaSpoilers(i)}mediaSpoilers(e){const t=[];e.forEach((e=>{const i={},s=e.dataset.spoilers.split(",");i.value=s[0],i.type=s[1]?s[1].trim():"max",i.item=e,t.push(i)}));let i=t.map((e=>"("+e.type+"-width: "+e.value+"px),"+e.value+","+e.type));i=i.filter(((e,t,i)=>i.indexOf(e)===t)),i.forEach((e=>{const i=e.split(","),s=i[1],l=i[2],r=window.matchMedia(i[0]),o=t.filter((e=>e.value===s&&e.type===l));r.addEventListener("change",(()=>{this.initSpollers(o,r)})),this.initSpollers(o,r)}))}initSpollers(e,t=!1){e.forEach((e=>{e=t?e.item:e,t.matches||!t?(e.classList.add("_init"),e.addEventListener("click",this.setSpoilerAction),this.initSpoilerBody(e)):(e.classList.remove("_init"),e.removeEventListener("click",this.setSpoilerAction),this.initSpoilerBody(e,!1))}))}initSpoilerBody(e,t=!0){e.querySelectorAll("[data-spoiler]").forEach((e=>{t?(e.removeAttribute("tabindex"),e.classList.contains("_active")||(e.nextElementSibling.hidden=!0)):(e.setAttribute("tabindex","-1"),e.nextElementSibling.hidden=!1)}))}setSpoilerAction(e){if(e.target.closest("[data-spoiler]")){const t=e.target.closest("[data-spoiler]"),i=t.closest("[data-spoilers]"),s=!!i.hasAttribute("data-one-spoiler");if(!i.querySelectorAll("._slide").length){if(s&&!t.classList.contains("_active")){const e=i.parentElement.querySelector("[data-spoiler]._active");e&&(e.classList.remove("_active"),_slideUp(e.nextElementSibling,500))}t.classList.toggle("_active"),_slideToggle(t.nextElementSibling,500)}e.preventDefault()}}}const spoilersArray=document.querySelectorAll("[data-spoilers]");spoilersArray&&new Spoilers(spoilersArray);
//# sourceMappingURL=spoiler.min.js.map
